# Task Tracker & Kanban

This file maintains the persistent planning board for the React GTM Kit project. Update task status and notes in-place as work progresses; never delete a task. Append new tasks instead of replacing existing entries so the project history remains auditable.

**Status definitions**
- **Backlog** – Planned work that has not yet started.
- **In Progress** – Actively being delivered.
- **Review** – Awaiting peer review, testing, or verification.
- **Blocked** – Requires external input or prerequisite completion.
- **Done** – Finished and documented.

| ID | Task | Status | Notes (last updated: 2025-11-06) |
| --- | --- | --- | --- |
| TK-001 | Consolidate charter, scope, architecture, and governance into README for single-source documentation. | Done | Captured full project brief, requirements, and governance in README refresh. |
| TK-002 | Freeze API surface and finalize design sign-off package (M0). | Review | 2025-11-06: Drafted API sign-off doc, ownership matrix, and decision log; awaiting architecture + DX approval.<br>Prep: reconfirm scope/non-goals in README with stakeholders;<br>Draft API signatures + lifecycle diagrams in `docs/design/api-signoff.md`;<br>Author governance/ownership matrix in `docs/governance/OWNERS.md`;<br>Record sign-off in `docs/design/DECISIONS.md`. |
| TK-003 | Implement core package alpha covering init/queue/flush, multi-container, teardown, and unit tests (M1). | Backlog | Tasks: scaffold `packages/core/` with build tooling;<br>Implement data layer manager, loader, queue, teardown utilities, logger;<br>Add Jest unit tests for init idempotency, FIFO queue, multi-container ordering, teardown;<br>Wire lint/test/build scripts in root. |
| TK-004 | Build Consent Mode v2 API with comprehensive tests (M2). | Backlog | Steps: extend core with type-safe `consent.ts` setters mapping Google keys;<br>Cover updates before/after init and network parameter composition in tests;<br>Document usage in `docs/how-to/consent.md`. |
| TK-005 | Deliver SSR noscript helper and CSP nonce handling with E2E coverage (M3). | Backlog | Steps: add noscript iframe generator utility;<br>Allow loader CSP nonce option for injected scripts;<br>Create Playwright E2E `e2e/csp-noscript.spec.ts` verifying nonce + noscript;<br>Document SSR/CSP setup in `docs/how-to/ssr.md`. |
| TK-006 | Ship React adapters (modern + legacy) with integration tests (M4). | Backlog | Plan: create `packages/react-modern/` hook/provider handling StrictMode double mount;<br>Create `packages/react-legacy/` HOC for class components;<br>Add Testing Library integration tests for StrictMode behavior;<br>Update examples to include CRA/Vite sample using adapters. |
| TK-007 | Publish Next.js helpers and App Router E2E scenario (M5). | Backlog | Plan: scaffold `packages/next/` with CSP nonce bridge, route listener, noscript export;<br>Build `examples/next-app/` exercising helpers across navigations;<br>Write Playwright E2E covering initial load + client transitions with dataLayer pushes. |
| TK-008 | Author task-based documentation and runnable examples (M6). | Backlog | Plan: set up docs site (Docusaurus/VitePress) with landing, concepts, how-to pages;<br>Produce runnable examples: vanilla CSR, React SPA, Next App Router, consent integration;<br>Integrate examples into CI smoke tests via npm scripts. |
| TK-009 | Complete hardening pass: coverage, size budgets, semantic-release wiring (M7). | Backlog | Plan: enforce coverage thresholds in Jest + CI;<br>Add bundle size check (≤3 kB gzip) via `size-limit`;<br>Configure GitHub Actions for lint/test/E2E/size + `semantic-release` pipeline;<br>Automate compatibility matrix (React versions, browsers) via scheduled workflow;<br>Prepare release notes template and dry-run publish. |
| TK-010 | Maintain compatibility matrix validation pipeline and monthly React release review cadence. | Backlog | Ongoing: draft maintenance checklist in `docs/governance/maintenance.md`;<br>Automate React release monitoring (RSS/API trigger);<br>Document support SLA + triage labels in `CONTRIBUTING.md`. |
| TK-011 | Bootstrap workspace tooling and monorepo scaffolding. | Done | Initialized pnpm workspace with shared tsconfig and central tsup/jest configs to unlock package scaffolding. |
| TK-012 | Enforce code quality gates across linting, formatting, and commits. | Done | 2025-11-07: Added shared ESLint/Prettier configs, Husky + lint-staged automation, commitlint checks, and contributor workflow doc covering formatting + commit rules. |
| TK-013 | Complete privacy, security, and compliance review artifacts. | Backlog | Draft `docs/governance/privacy.md` outlining consent responsibilities and regional requirements;<br>Run dependency/security audits with findings captured in `docs/governance/security-review.md`;<br>Enable automated vulnerability alerts (Dependabot or similar) with triage plan;<br>Fold privacy/security sign-off into release checklist. |
| TK-014 | Prepare 1.0 launch collateral and release checklist. | Backlog | Generate API reference in `docs/reference/api.md` (Typedoc or curated tables);<br>Author troubleshooting + migration guides in `docs/how-to/troubleshooting.md`;<br>Create release checklist and notes template in `docs/governance/release-checklist.md`;<br>Polish README quickstart with links to docs/examples for launch. |
| TK-015 | Run architecture review and finalize RFCs for instrumentation and container strategy (M0). | Backlog | Draft `docs/design/rfc-gtm-loader.md` covering loader lifecycle, dataLayer isolation, and error handling;<br>Schedule stakeholder review, capture decisions in `docs/design/DECISIONS.md`;<br>Update architecture diagrams under `docs/design/architecture/`. |
| TK-016 | Validate legal/compliance requirements with privacy counsel pre-M0. | Backlog | Collect GDPR/CCPA consent obligations and document in `docs/governance/privacy.md` draft;<br>Record open legal risks + mitigations in `docs/governance/risk-log.md`;<br>Secure sign-off before implementation start. |
| TK-017 | Establish cross-team communication plan and project rituals. | Backlog | Define weekly standup + milestone demo cadence in `docs/governance/rituals.md`;<br>Identify communication channels (Slack/email) and escalation paths;<br>Publish stakeholder map in `docs/governance/OWNERS.md`. |
| TK-018 | Build core package bundler + TypeScript infrastructure (M1). | Done | Added tsup build config for `@react-gtm-kit/core` with ESM/CJS outputs and wired root scripts for workspace builds. |
| TK-019 | Implement core data layer manager with robust error handling (M1). | Done | Delivered `ensureDataLayer` utilities restoring previous globals and queue flush semantics in `packages/core/src/data-layer.ts`. |
| TK-020 | Deliver container loader and teardown orchestration (M1). | Done | Implemented script manager injecting/deduping multi-container scripts with teardown cleanup in `packages/core/src/script-manager.ts`. |
| TK-021 | Provide logging, diagnostics, and developer warnings (M1). | Done | Introduced pluggable logger facade with safe fallbacks powering init/queue diagnostics in core client. |
| TK-022 | Author alpha release notes and migration guidance (M1). | Backlog | Draft alpha changelog in `docs/releases/alpha.md` summarizing features/limitations;<br>Prepare upgrade notes for beta consumers;<br>Share feedback channels in README alpha section. |
| TK-023 | Expand consent API typing and preset management (M2). | Done | 2025-11-05: Added consent state utilities, validation, and presets with unit tests in `packages/core/src/consent/`. |
| TK-024 | Integrate consent events with loader lifecycle (M2). | Done | 2025-11-05: Core client now exposes consent default/update APIs with data layer queuing tests for pre/post init behavior. |
| TK-025 | Document consent API adoption patterns for enterprise (M2). | Backlog | Produce `docs/how-to/enterprise-consent.md` with examples for CMP integration, deferred consent, and revocation;<br>Add troubleshooting section for mismatched consent states;<br>Record FAQs for support teams. |
| TK-026 | Implement SSR noscript helper utilities (M3). | Done | 2025-11-05: Added `createNoscriptMarkup` helper with tests, exported defaults, and documented SSR usage in `docs/how-to/ssr.md`. |
| TK-027 | Add CSP nonce propagation across loaders (M3). | Done | 2025-11-05: Core script manager now copies nonce + custom script attributes with unit coverage and SSR guide updates; follow-up E2E + adapter validation to land with platform packages. |
| TK-028 | Set up Playwright E2E harness for SSR + CSP flows (M3). | Done | 2025-11-06: Added Playwright workspace, SSR CSP fixture server, CI workflow, and npm scripts for `pnpm e2e:test`. |
| TK-029 | Develop React modern adapter with Suspense + StrictMode support (M4). | Done | 2025-11-07: Delivered `@react-gtm-kit/react-modern` package with provider + hooks, StrictMode remount handling, and Suspense-aware tests; lint + jest green.<br>Implement `packages/react-modern/src/provider.tsx` handling double-invocation safeguards;<br>Expose hooks for pushing events and updating consent;<br>Add Testing Library coverage for Suspense boundaries. |
| TK-030 | Ship legacy React HOC and class component support (M4). | Backlog | Provide `withGtm` HOC bridging class lifecycle methods;<br>Ensure compatibility back to React 16.8;<br>Document migration path from legacy to modern adapter. |
| TK-031 | Update sample applications showcasing adapters (M4). | Backlog | Create `examples/react-strict-mode/` using modern adapter under StrictMode;<br>Add `examples/react-legacy/` demonstrating HOC usage;<br>Write README guides and npm scripts to run samples. |
| TK-032 | Build Next.js App Router helpers with routing analytics (M5). | Backlog | Implement `packages/next/src/route-listener.ts` capturing route changes;<br>Expose server components for head scripts + noscript handling;<br>Add unit tests mocking Next.js router events. |
| TK-033 | Create Next.js sample app with consent + CSP integration (M5). | Backlog | Scaffold `examples/next-app/` with App Router, dynamic routes, and consent banner;<br>Integrate helpers + verify CSR/SSR parity;<br>Document setup in example README. |
| TK-034 | Author Playwright E2E for Next.js navigations (M5). | Backlog | Write `e2e/next-app.spec.ts` covering initial load, client transitions, consent changes;<br>Capture screenshots + metrics for documentation;<br>Integrate into CI pipeline. |
| TK-035 | Launch documentation site with navigation and theming (M6). | Backlog | Choose framework (Docusaurus/VitePress) and configure base theme;<br>Set up docs deployment workflow (Vercel/Netlify/GitHub Pages);<br>Link docs site from README + package docs. |
| TK-036 | Produce runnable example suite with automated smoke tests (M6). | Backlog | Build vanilla CSR, React SPA, Next App Router, and consent-focused demos;<br>Add npm scripts for installing + running each example;<br>Automate smoke tests via CI matrix. |
| TK-037 | Write concept/how-to docs with task-oriented structure (M6). | Backlog | Draft concept guides for architecture, consent lifecycle, SSR strategy;<br>Author how-to guides for setup, migration, debugging, and analytics integration;<br>Review content with DX writers. |
| TK-038 | Configure code coverage and quality gates in CI (M7). | Backlog | Enforce Jest coverage thresholds + generate reports;<br>Integrate Coveralls/codecov reporting;<br>Add failing gate if coverage regresses. |
| TK-039 | Implement bundle size monitoring and budgets (M7). | Backlog | Configure `size-limit` for core/adapters/next packages;<br>Add CI job failing when gzip sizes exceed targets;<br>Document optimization guidelines. |
| TK-040 | Wire semantic-release with changelog automation (M7). | Backlog | Configure `semantic-release` with npm + GitHub plugins;<br>Set up release branches/tags and dry-run job;<br>Document release workflow in `docs/governance/release-process.md`. |
| TK-041 | Establish observability and support readiness for post-launch. | Backlog | Define error reporting + telemetry strategy (Sentry/Datadog) documented in `docs/governance/operability.md`;<br>Create support runbooks and escalation matrix;<br>Plan community support channels (Discussions/Discord). |
| TK-042 | Plan marketing/devrel launch assets. | Backlog | Coordinate blog post outline, launch tweet/thread drafts, and conference talk abstract;<br>Create GTM kit overview deck in `docs/marketing/launch-deck.pptx` placeholder;<br>Align with marketing on launch timeline + KPIs. |
| TK-043 | Catalogue GTM tracking scenarios and acceptance criteria (M0). | Backlog | Inventory required tracking event categories (page view, custom events, ecommerce, conversions, consent updates) in `docs/design/tracking-matrix.md`;<br>Confirm stakeholder sign-off on minimal coverage for each milestone;<br>Document success metrics and validation steps alongside API sign-off package. |
| TK-044 | Define event schema and TypeScript contracts (M1). | Backlog | Create `packages/core/src/events/types.ts` capturing minimal GA4/Ads/custom payload shapes with generics;<br>Add compile-time tests using `tsd` to ensure consumer ergonomics;<br>Document type extension guidance in `docs/reference/events.md`. |
| TK-045 | Implement lightweight event push helpers (M1). | Backlog | Provide `pushEvent` and `pushEcommerce` utilities in `packages/core/src/events/` reusing core queue without extra deps;<br>Expose tree-shakeable entry points with esm/cjs builds tested via `tsup` bundle analysis;<br>Add README usage snippets emphasizing minimal API surface. |
| TK-046 | Build core event flow unit and integration tests (M1). | Done | Added Jest suite validating queue flush ordering, multi-container injection, and teardown cleanup for the core client. |
| TK-047 | Enforce zero-dependency and size budgets early (M1). | Backlog | Add lint rule or custom script ensuring `packages/core` and adapters have no runtime deps beyond TypeScript helpers;<br>Integrate size snapshots via `size-limit` pre-M7 to catch regressions;<br>Document lightweight philosophy in `docs/governance/engineering-principles.md`. |
| TK-048 | Validate consent-aware event gating (M2). | Backlog | Extend tests ensuring consent states block/allow event pushes appropriately prior to loader init;<br>Simulate CMP-driven consent changes in unit tests using mock adapters;<br>Document consent-event interaction matrix in `docs/how-to/consent.md`. |
| TK-049 | Harden SSR data layer hydration (M3). | Backlog | Implement utilities syncing server-rendered dataLayer state to client without duplication;<br>Add SSR unit tests ensuring noscript helper + hydration remain idempotent;<br>Capture guidance in `docs/how-to/ssr.md` with troubleshooting tips. |
| TK-050 | Expand React adapter coverage for routing and suspense (M4). | Backlog | Add React Router instrumentation example ensuring event pushes on navigation;<br>Test Suspense + StrictMode scenarios with Testing Library to confirm deduped pushes;<br>Update adapter docs with routing integration patterns. |
| TK-051 | Cover Next.js edge/runtime nuances (M5). | Backlog | Verify helpers work in both Node.js and Edge runtimes with targeted tests;<br>Add example pages using dynamic routes, middleware consent enforcement, and app directory layouts;<br>Document configuration in `examples/next-app/README.md`. |
| TK-052 | Produce comprehensive tracking examples suite (M6). | Backlog | Build runnable examples showcasing page view, ecommerce, custom event, conversion, and consent scenarios across frameworks;<br>Add npm scripts for snapshotting dataLayer outputs for QA;<br>Ensure CI smoke tests run all tracking scenarios without inflating bundle size. |
| TK-053 | Author troubleshooting and FAQ content for tracking scenarios (M6). | Backlog | Document common pitfalls (duplicate containers, consent mismatches, missing dataLayer) in `docs/how-to/troubleshooting.md`;<br>Create FAQ entries for each tracking scenario with minimal reproduction steps;<br>Link guidance from README quickstart. |
| TK-054 | Finalize release-readiness checklist and dry run (M7). | Backlog | Combine coverage, size, consent, and example verification checks into `docs/governance/release-checklist.md` with gating criteria;<br>Execute end-to-end dry run including version bump, changelog, and example validation;<br>Collect sign-offs from engineering, DX, and compliance stakeholders. |
| TK-055 | Provide server-side GTM integration reference implementation. | Backlog | Draft architecture notes for server-side event relay in `examples/server/README.md`;<br>Implement minimal Node-based endpoint that forwards structured events to GTM server-side tagging;<br>Document deployment considerations and configuration in `docs/how-to/server-integration.md`. |
| TK-056 | Deliver companion web frontend implementation showcasing full-stack flow. | Backlog | Build a frontend example under `examples/fullstack-web/` that pairs with the server reference;<br>Demonstrate event capture, consent sync, and data layer pushes across client/server;<br>Document setup and usage in example README with pointers from main docs. |
